<!DOCTYPE html>
<html>
<head>
    <title>3%3*9%9*+02+36%/45</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <div id="data-container">
        <table class="table table-white table-hover table-striped container-fluid">
            <thead>
               
                <tr>
                    <th>ID</th>
                    <th>userid</th>
                    <th>Sender</th>
                    <th>Message</th>
                    <th>Time</th>
                    <th>Type</th>
                </tr>
            </thead>
            <tbody id="data-body"></tbody>
        </table>
    </div>

</body>
<script type="text/javascript">
    // Get a reference to the "Get Data" button and data container elements
    var dataBody = document.getElementById("data-body");

    function displayData(data) {
        // Clear the data container
        dataBody.innerHTML = "";

        // Loop through the data and create rows in the table for each record
        for (var i = 0; i < data.length; i++) {
            var record = data[i];

  

                // Create a new row in the table
                var row = document.createElement("tr");

                var idCell = document.createElement("td");
                idCell.textContent = record.id;
                row.appendChild(idCell);


                var userid = document.createElement("td");
                userid.textContent = record.userid;
                row.appendChild(userid);


                var sender = document.createElement("td");
                sender.textContent = record.sender;
                row.appendChild(sender);

                var msg = document.createElement("td");
                msg.textContent = record.msg;
                row.appendChild(msg);


                var time = document.createElement("td");
                time.textContent = record.time;
                row.appendChild(time);

                 var type = document.createElement("td");
                type.textContent = record.type;
                row.appendChild(type);




                // Append the row to the table body
                dataBody.appendChild(row);
            }
        }
    

    function getDataFromAPI() {
        // Create a new XMLHttpRequest object
        var xhr = new XMLHttpRequest();

        // Set the API endpoint URL
        var url = "https://anikdevnath.com/KOTAK_1/getM.php";

        // Open a new GET request with the URL
        xhr.open("GET", url);

        // Set the response type as JSON, assuming the API returns JSON data
        xhr.responseType = "json";

        // Define a function to handle the response
        xhr.onload = function() {
            // Check if the request was successful (status code 200)
            if (xhr.status === 200) {
                // Get the response data from the XHR object
                var data = xhr.response;
                displayData(data);
            }
        };

        // Send the request to the server
        xhr.send();
    }
function pollDataFromAPI() {
    getDataFromAPI();
    setTimeout(pollDataFromAPI, 1000); // Poll every 5 seconds (adjust as needed)
}

// Start the polling process
pollDataFromAPI();


    

    // Call the functions to get data and display it in the table
  //  getDataFromAPI();
   // setInterval(getDataFromAnotherAPI, 5000);
</script>
</html>
